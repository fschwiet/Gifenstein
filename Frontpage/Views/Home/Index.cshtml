
@{
    ViewBag.Title = "All right, you people";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Header {
    <style type="text/css">
    #sortable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    </style>
    <script>
        $(function() {
            $( "#sortable" ).sortable();
            $( "#sortable" ).disableSelection();
        });
    
        function ImageRow()
        {
        }

        ImageRow.prototype.Render = function() {
            var result = $("<li><img></li>");
            result.find("img").attr("src", this.imageUrl);
            return result;
        };
        
        function AllRightAnnouncement() {
            this.imageUrl = "/Content/AllRightGentlemen_dialog.png";
        }

        $.extend(AllRightAnnouncement.prototype, ImageRow.prototype);

        function AllRightMinor() {
            this.imageUrl = "/Content/AllRightGentlemen_unimpressed.png";
        }

        $.extend(AllRightMinor.prototype, ImageRow.prototype);

        function AllRightMajor() {
            this.imageUrl = "/Content/AllRightGentlemen_impressed.png";
        }

        $.extend(AllRightMajor.prototype, ImageRow.prototype);

        function RowTypeManager() {
            this._rowTypes = {};
            this._rowList = [];
        }

        RowTypeManager.prototype.addRowType = function(name) {
            this._rowTypes[name] = {
                constructor: window[name],
                index: this._rowList.length
            };
            this._rowList.push(name);
        };

        RowTypeManager.prototype.BuildRow = function(name) {
            var constructor = this._rowTypes[name].constructor;
            return new constructor();
        };

        var rowTypeManager = new RowTypeManager();

        rowTypeManager.addRowType("AllRightAnnouncement");
        rowTypeManager.addRowType("AllRightMinor");
        rowTypeManager.addRowType("AllRightMajor");
    </script>    
}
<h2>We're going to make a gif.</h2>

 
<ul id="sortable">
</ul>
 
 
<script type="text/javascript">

    var source = [
        {
            type: "AllRightAnnouncement"
        },
        {
            type: "AllRightMinor"
        },
        {
            type: "AllRightMajor"
        }
    ];

    for (var i = 0; i < source.length; i++) {
        var row = rowTypeManager.BuildRow(source[i].type);

        $("#sortable").append(row.Render());
    }
</script>
